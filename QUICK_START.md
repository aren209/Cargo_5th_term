# Быстрый старт - Python GUI для системы авиаперевозок

## Для проверяющего

Данное руководство описывает процесс сборки и запуска системы управления расписанием авиаперевозок. Проект состоит из C++ библиотеки, экспортируемой в DLL, и Python графического интерфейса.

## Требования

- **Visual Studio 2019 или 2022** с компонентами C++ (обязательно x64)
- **Python 3.7+** (64-bit)
- **Windows** (проект использует Windows API)

## Шаг 1: Сборка DLL (один раз)

### Способ 1: Использование скрипта (рекомендуется)

1. Откройте **"x64 Native Tools Command Prompt for VS 2022"** (или 2019)
   - Найти можно в меню Пуск по запросу "x64 Native Tools"
   - Это важно! Обычная командная строка может использовать x86 окружение
   
2. Перейдите в директорию проекта:
   ```cmd
   cd <путь_к_проекту>\Cargo_5th_term
   ```
   
3. Запустите скрипт сборки:
   ```cmd
   build_dll.bat
   ```
   
   Если скрипт не найдёт x64 Native Tools автоматически, откройте их вручную (см. способ ниже).

### Способ 2: Использование Visual Studio

1. Откройте Visual Studio
2. Создайте новый проект типа **"Dynamic-Link Library (DLL)"**
3. **ВАЖНО:** В настройках проекта выберите платформу **x64** (не Win32!)
4. Добавьте все исходные файлы (`.cpp` и `.h`)
5. В настройках проекта добавьте:
   - Preprocessor Definitions: `FLIGHT_SCHEDULE_EXPORTS`
   - Configuration Type: `Dynamic Library (.dll)`
6. Соберите проект (Build → Build Solution)

## Шаг 2: Проверка DLL

После успешной сборки DLL должна быть создана в:
- `x64\Debug\FlightScheduleAPI.dll` (для Debug)
- `x64\Release\FlightScheduleAPI.dll` (для Release)

**Рекомендуется проверить архитектуру DLL:**
```cmd
cd python_bindings
python check_dll.py
```

Должно показать: `Архитектура DLL: x64` и `✓ Архитектуры совместимы`

## Шаг 3: Запуск GUI

1. Откройте командную строку (или терминал)
2. Перейдите в директорию с Python скриптами:
   ```cmd
   cd <путь_к_проекту>\Cargo_5th_term\python_bindings
   ```
3. Запустите GUI:
   ```cmd
   python flight_schedule_gui.py
   ```

При первом запуске будут загружены тестовые данные (самолёты, аэропорты, рейсы).

## Тестирование

Для проверки работоспособности API:
```cmd
python test_api.py
```

## Основные функции GUI

### 1. Расписание
- Просмотр всего расписания
- Проверка валидности
- Автоматическое исправление ошибок

### 2. Рейсы
- Добавление новых рейсов с указанием:
  - Номера рейса
  - Аэропортов отправления и назначения
  - Времени отправления и прибытия
  - ID самолёта
- Удаление рейсов

### 3. Самолёты
- Добавление самолётов с указанием грузоподъёмности

### 4. Аэропорты
- Добавление новых аэропортов

### 5. Грузы
- Добавление обычных и срочных грузов
- Отслеживание просроченных срочных грузов

### 6. Пассажиры
- Добавление пассажиров

### 7. Отчёты
- Расписание для конкретного самолёта
- Расписание за период
- Отчёт о просроченных грузах

## Примеры использования

### Добавление рейса

1. Перейдите на вкладку **"Рейсы"**
2. Заполните форму:
   - Номер рейса: `FL-001`
   - Аэропорт отправления: `Шереметьево`
   - Аэропорт назначения: `Домодедово`
   - Дата/время отправления: `2024-01-15 10:00`
   - Дата/время прибытия: `2024-01-15 12:00`
   - ID самолёта: `A-001`
3. Нажмите **"Добавить рейс"**

### Просмотр расписания самолёта

1. Перейдите на вкладку **"Отчёты"**
2. Введите ID самолёта: `A-001`
3. (Опционально) Укажите период
4. Нажмите **"Расписание самолёта"**

### Проверка валидности расписания

1. Перейдите на вкладку **"Расписание"**
2. Нажмите **"Проверить валидность"**
3. При обнаружении ошибок нажмите **"Исправить ошибки"**

## Устранение проблем

### DLL не найдена

**Решение:**
- Убедитесь, что DLL скомпилирована и находится в `x64\Debug\FlightScheduleAPI.dll`
- Скрипт автоматически ищет DLL в нескольких местах, включая `python_bindings\`
- Можно скопировать DLL в `python_bindings\` вручную

### Ошибка "Architecture mismatch" или "not a valid Win32 application"

**Проблема:** DLL собрана для 32-bit (x86), а Python 64-bit.

**Решение:**
1. Убедитесь, что используете **"x64 Native Tools Command Prompt"** для сборки
2. Пересоберите DLL (удалите старую и перекомпилируйте)
3. Проверьте архитектуру: `python python_bindings\check_dll.py`

### DLL всё ещё не загружается

**Решение:**
- Установите **Visual C++ Redistributable** для вашей версии Visual Studio
- Проверьте, что DLL собрана для той же архитектуры, что и Python
- Убедитесь, что все исходные файлы присутствуют при компиляции

### Кириллица отображается неправильно

**Решение:**
- Установите кодировку консоли: `chcp 65001`
- В GUI кириллица должна работать автоматически

## Дополнительная информация

Подробная документация: `PYTHON_GUI_README.md`

